define(["require","jquery","./defaults","./utils"],function(b,d,e,c){function a(h,f){this.options=h;if(f!=null){this.fromElement(f)}this.options=e.apply(this.options);if(f&&f.is("input")){var g=b(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=c.Decorate(this.options.dataAdapter,g)}}a.prototype.fromElement=function(g){var p=["select2"];if(this.options.multiple==null){this.options.multiple=g.prop("multiple")}if(this.options.disabled==null){this.options.disabled=g.prop("disabled")}if(this.options.language==null){if(g.prop("lang")){this.options.language=g.prop("lang").toLowerCase()}else{if(g.closest("[lang]").prop("lang")){this.options.language=g.closest("[lang]").prop("lang")}}}if(this.options.dir==null){if(g.prop("dir")){this.options.dir=g.prop("dir")}else{if(g.closest("[dir]").prop("dir")){this.options.dir=g.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}}g.prop("disabled",this.options.disabled);g.prop("multiple",this.options.multiple);if(c.GetData(g[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.')}c.StoreData(g[0],"data",c.GetData(g[0],"select2Tags"));c.StoreData(g[0],"tags",true)}if(c.GetData(g[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.")}g.attr("ajax--url",c.GetData(g[0],"ajaxUrl"));c.StoreData(g[0],"ajax-Url",c.GetData(g[0],"ajaxUrl"))}var j={};function o(r,s){return s.toUpperCase()}for(var m=0;m<g[0].attributes.length;m++){var n=g[0].attributes[m].name;var l="data-";if(n.substr(0,l.length)==l){var h=n.substring(l.length);var f=c.GetData(g[0],h);var i=h.replace(/-([a-z])/g,o);j[i]=f}}if(d.fn.jquery&&d.fn.jquery.substr(0,2)=="1."&&g[0].dataset){j=d.extend(true,{},g[0].dataset,j)}var k=d.extend(true,{},c.GetData(g[0]),j);k=c._convertData(k);for(var q in k){if(d.inArray(q,p)>-1){continue}if(d.isPlainObject(this.options[q])){d.extend(this.options[q],k[q])}else{this.options[q]=k[q]}}return this};a.prototype.get=function(f){return this.options[f]};a.prototype.set=function(f,g){this.options[f]=g};return a});