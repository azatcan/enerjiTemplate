define(["./select","../utils","jquery"],function(f,h,e){function g(c,b){var a=b.get("data")||[];g.__super__.constructor.call(this,c,b);this.addOptions(this.convertToOptions(a))}h.Extend(g,f);g.prototype.select=function(b){var a=this.$element.find("option").filter(function(d,c){return c.value==b.id.toString()});if(a.length===0){a=this.option(b);this.addOptions(a)}g.__super__.select.call(this,b)};g.prototype.convertToOptions=function(z){var b=this;var w=this.$element.find("option");var A=w.map(function(){return b.item(e(this)).id}).get();var x=[];function s(i){return function(){return e(this).val()==i.id}}for(var t=0;t<z.length;t++){var c=this._normalizeItem(z[t]);if(e.inArray(c.id,A)>=0){var v=w.filter(s(c));var u=this.item(v);var a=e.extend(true,{},c,u);var y=this.option(a);v.replaceWith(y);continue}var B=this.option(c);if(c.children){var d=this.convertToOptions(c.children);h.appendMany(B,d)}x.push(B)}return x};return g});