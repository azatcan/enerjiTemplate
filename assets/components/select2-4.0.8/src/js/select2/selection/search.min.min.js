define(["jquery","../utils","../keys"],function(g,h,f){function e(a,c,b){a.call(this,c,b)}e.prototype.render=function(b){var c=g('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c;this.$search=c.find("input");var a=b.call(this);this._transferTabIndex();return a};e.prototype.bind=function(b,k,a){var d=this;b.call(this,k,a);k.on("open",function(){d.$search.trigger("focus")});k.on("close",function(){d.$search.val("");d.$search.removeAttr("aria-activedescendant");d.$search.trigger("focus")});k.on("enable",function(){d.$search.prop("disabled",false);d._transferTabIndex()});k.on("disable",function(){d.$search.prop("disabled",true)});k.on("focus",function(i){d.$search.trigger("focus")});k.on("results:focus",function(i){d.$search.attr("aria-activedescendant",i.id)});this.$selection.on("focusin",".select2-search--inline",function(i){d.trigger("focus",i)});this.$selection.on("focusout",".select2-search--inline",function(i){d._handleBlur(i)});this.$selection.on("keydown",".select2-search--inline",function(o){o.stopPropagation();d.trigger("keypress",o);d._keyUpPrevented=o.isDefaultPrevented();var i=o.which;if(i===f.BACKSPACE&&d.$search.val()===""){var j=d.$searchContainer.prev(".select2-selection__choice");if(j.length>0){var p=h.GetData(j[0],"data");d.searchRemoveChoice(p);o.preventDefault()}}});var c=document.documentMode;var l=c&&c<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(i){if(l){d.$selection.off("input.search input.searchcheck");return}d.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(j){if(l&&j.type==="input"){d.$selection.off("input.search input.searchcheck");return}var i=j.which;if(i==f.SHIFT||i==f.CTRL||i==f.ALT){return}if(i==f.TAB){return}d.handleSearch(j)})};e.prototype._transferTabIndex=function(a){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};e.prototype.createPlaceholder=function(b,a){this.$search.attr("placeholder",a.text)};e.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");a.call(this,b);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(c){this.$search.trigger("focus")}};e.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=false};e.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b});this.$search.val(b.text);this.handleSearch()};e.prototype.resizeSearch=function(){this.$search.css("width","25px");var b="";if(this.$search.attr("placeholder")!==""){b=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var a=this.$search.val().length+1;b=(a*0.75)+"em"}this.$search.css("width",b)};return e});