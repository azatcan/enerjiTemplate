define(["jquery","../keys","../utils"],function(h,f,e){function g(){}g.prototype.bind=function(b,d,a){var c=this;b.call(this,d,a);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(j){c._handleClear(j)});d.on("keypress",function(j){c._handleKeyboardClear(j,d)})};g.prototype._handleClear=function(l,m){if(this.options.get("disabled")){return}var b=this.$selection.find(".select2-selection__clear");if(b.length===0){return}m.stopPropagation();var c=e.GetData(b[0],"data");var n=this.$element.val();this.$element.val(this.placeholder.id);var d={data:c};this.trigger("clear",d);if(d.prevented){this.$element.val(n);return}for(var a=0;a<c.length;a++){d={data:c[a]};this.trigger("unselect",d);if(d.prevented){this.$element.val(n);return}}this.$element.trigger("change");this.trigger("toggle",{})};g.prototype._handleKeyboardClear=function(a,b,c){if(c.isOpen()){return}if(b.which==f.DELETE||b.which==f.BACKSPACE){this._handleClear(b)}};g.prototype.update=function(a,b){a.call(this,b);if(this.$selection.find(".select2-selection__placeholder").length>0||b.length===0){return}var c=this.options.get("translations").get("removeAllItems");var d=h('<span class="select2-selection__clear" title="'+c()+'">&times;</span>');e.StoreData(d[0],"data",b);this.$selection.find(".select2-selection__rendered").prepend(d)};return g});