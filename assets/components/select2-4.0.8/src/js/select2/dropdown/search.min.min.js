define(["jquery","../utils"],function(f,d){function e(){}e.prototype.render=function(b){var a=b.call(this);var c=f('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');this.$searchContainer=c;this.$search=c.find("input");a.prepend(c);return a};e.prototype.bind=function(b,h,a){var c=this;b.call(this,h,a);this.$search.on("keydown",function(g){c.trigger("keypress",g);c._keyUpPrevented=g.isDefaultPrevented()});this.$search.on("input",function(g){f(this).off("keyup")});this.$search.on("keyup input",function(g){c.handleSearch(g)});h.on("open",function(){c.$search.attr("tabindex",0);c.$search.trigger("focus");window.setTimeout(function(){c.$search.trigger("focus")},0)});h.on("close",function(){c.$search.attr("tabindex",-1);c.$search.val("");c.$search.trigger("blur")});h.on("focus",function(){if(!h.isOpen()){c.$search.trigger("focus")}});h.on("results:all",function(g){if(g.query.term==null||g.query.term===""){var j=c.showSearch(g);if(j){c.$searchContainer.removeClass("select2-search--hide")}else{c.$searchContainer.addClass("select2-search--hide")}}})};e.prototype.handleSearch=function(b){if(!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=false};e.prototype.showSearch=function(b,a){return true};return e});