module("Data adapters - Maximum selection length");var MaximumSelectionLength=require("select2/data/maximumSelectionLength");var $=require("jquery");var Options=require("select2/options");var Utils=require("select2/utils");function MaximumSelectionStub(){this.called=false;this.currentData=[]}MaximumSelectionStub.prototype.current=function(b){b(this.currentData)};MaximumSelectionStub.prototype.val=function(b){this.currentData.push(b)};MaximumSelectionStub.prototype.query=function(d,c){this.called=true};var MaximumSelectionData=Utils.Decorate(MaximumSelectionStub,MaximumSelectionLength);test("0 never displays the notice",function(e){var d=new Options({maximumSelectionLength:0});var f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.val("1");f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.val("1");f.val("2");f.query({term:""});e.ok(f.called)});test("< 0 never displays the notice",function(e){var d=new Options({maximumSelectionLength:-1});var f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.val("1");f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.val("1");f.val("2");f.query({term:""});e.ok(f.called)});test("triggers when >= 1 selection",function(e){var f=new Options({maximumSelectionLength:1});var d=new MaximumSelectionData(null,f);d.trigger=function(){e.ok(false,"No events should be triggered")};d.query({term:""});e.ok(d.called);d=new MaximumSelectionData(null,f);d.trigger=function(){e.ok(true,"The event should be triggered.")};d.val("1");d.query({term:""});e.ok(!d.called)});test("triggers when >= 2 selections",function(e){var d=new Options({maximumSelectionLength:2});var f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(false,"No events should be triggered")};f.val("1");f.query({term:""});e.ok(f.called);f=new MaximumSelectionData(null,d);f.trigger=function(){e.ok(true,"The event should be triggered.")};f.val("1");f.val("2");f.query({term:""});e.ok(!f.called)});