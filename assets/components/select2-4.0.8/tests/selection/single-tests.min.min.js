module("Selection containers - Single");var SingleSelection=require("select2/selection/single");var $=require("jquery");var Options=require("select2/options");var Utils=require("select2/utils");var options=new Options({});test("display uses templateSelection",function(g){var h=false;var i=new Options({templateSelection:function(a){h=true;return a.text}});var j=new SingleSelection($("#qunit-fixture .single"),i);var f=j.display({text:"test"});g.ok(h);g.equal(f,"test")});test("templateSelection can addClass",function(h){var j=false;var k=new Options({templateSelection:function(a,b){j=true;b.addClass("testclass");return a.text}});var l=new SingleSelection($("#qunit-fixture .single"),k);var i=l.selectionContainer();var g=l.display({text:"test"},i);h.ok(j);h.equal(g,"test");h.ok(i.hasClass("testclass"))});test("empty update clears the selection",function(e){var h=new SingleSelection($("#qunit-fixture .single"),options);var f=h.render();var g=f.find(".select2-selection__rendered");g.text("testing");g.attr("title","testing");h.update([]);e.equal(g.text(),"");e.equal(g.attr("title"),undefined)});test("update renders the data text",function(e){var h=new SingleSelection($("#qunit-fixture .single"),options);var f=h.render();var g=f.find(".select2-selection__rendered");h.update([{text:"test"}]);e.equal(g.text(),"test")});test("escapeMarkup is being used",function(f){var i=new SingleSelection($("#qunit-fixture .single"),options);var g=i.render();var h=g.find(".select2-selection__rendered");var j='<script>bad("stuff");<\/script>';i.update([{text:j}]);f.equal(h.text(),j,"The text should be escaped by default to prevent injection")});