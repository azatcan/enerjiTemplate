module("Results - highlighting results");test("results:all with no data skips results:focus",function(a){a.expect(0);var g=require("jquery");var d=g("<select></select>");var e=g("<div></div>");var j=g("<span></span>");var b=new MockContainer();e.appendTo(g("#qunit-fixture"));d.appendTo(e);var h=require("select2/utils");var i=require("select2/options");var c=require("select2/results");var f=new c(d,new i({}));f.data={};f.data.current=function(k){k([{id:"test"}])};f.render();f.bind(b,j);f.on("results:focus",function(k){a.ok(false,"The results:focus event was triggered")});b.trigger("results:all",{data:{results:[]}})});test("results:all triggers results:focus on the first item",function(a){a.expect(2);var g=require("jquery");var d=g("<select></select>");var e=g("<div></div>");var j=g("<span></span>");var b=new MockContainer();e.appendTo(g("#qunit-fixture"));d.appendTo(e);var h=require("select2/utils");var i=require("select2/options");var c=require("select2/results");var f=new c(d,new i({}));f.data={};f.data.current=function(k){k([{id:"test"}])};f.render();f.bind(b,j);f.on("results:focus",function(k){a.equal(k.data.id,"test");a.equal(k.data.text,"Test")});b.trigger("results:all",{data:{results:[{id:"test",text:"Test"}]}})});test("results:append does not trigger results:focus",function(a){a.expect(0);var g=require("jquery");var d=g("<select></select>");var e=g("<div></div>");var j=g("<span></span>");var b=new MockContainer();e.appendTo(g("#qunit-fixture"));d.appendTo(e);var h=require("select2/utils");var i=require("select2/options");var c=require("select2/results");var f=new c(d,new i({}));f.data={};f.data.current=function(k){k([{id:"test"}])};f.render();f.bind(b,j);f.on("results:focus",function(){a.ok(false,"The results:focus event was triggered")});b.trigger("results:append",{data:{results:[{id:"test",text:"Test"}]}})});test("scrollAfterSelect triggers results:focus",function(a){a.expect(3);var g=require("jquery");var d=g("<select></select>");var e=g("<div></div>");var j=g("<span></span>");var b=new MockContainer();e.appendTo(g("#qunit-fixture"));d.appendTo(e);var h=require("select2/utils");var i=require("select2/options");var c=require("select2/results");var k=new i({scrollAfterSelect:true});var f=new c(d,k);f.data={};f.data.current=function(l){l([{id:"test"}])};f.render();f.bind(b,j);a.equal(k.get("scrollAfterSelect"),true);f.append({results:[{id:"test",text:"Test"}]});f.on("results:focus",function(l){a.equal(l.data.id,"test");a.equal(l.data.text,"Test")});b.trigger("select",{})});test("!scrollAfterSelect does not trigger results:focus",function(a){a.expect(1);var g=require("jquery");var d=g("<select></select>");var e=g("<div></div>");var j=g("<span></span>");var b=new MockContainer();e.appendTo(g("#qunit-fixture"));d.appendTo(e);var h=require("select2/utils");var i=require("select2/options");var c=require("select2/results");var k=new i({scrollAfterSelect:false});var f=new c(d,k);f.data={};f.data.current=function(l){l([{id:"test"}])};f.render();f.bind(b,j);a.equal(k.get("scrollAfterSelect"),false);f.append({results:[{id:"test",text:"Test"}]});f.on("results:focus",function(){a.ok(false,"The results:focus event was triggered")});b.trigger("select",{})});